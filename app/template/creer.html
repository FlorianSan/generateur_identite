{% extends 'layout.html' %}

{% block title %}
    ID Creator Créer
{% endblock %}

{% block script %}
	<script>

	var source = new EventSource("/progress");
	source.onmessage = function(event) {
		$('.progress-bar').css('width', event.data+'%').attr('aria-valuenow', event.data);
		$('.progress-bar-label').text(event.data+'%');

		if(event.data == 100){
			source.close()
		}
	}
	</script>
{% endblock %}

{% block header %}
    <header id="top2">
        <h1>creer</h1>
    </header>
{% endblock %}


{% block content %}
  <section id="creer">
                    <form method="post" action="{{ url_for('formulaire_creation') }}">
                        <input name="nombre" placeholder="Nombre d'identité" type="number" />
                        {% if session.logged_in %}
                        <input name="description" placeholder="Description" type="textarea" />
                        {% endif %}

                        <input type="checkbox" name="idcard" id="idcard" checked="checked">
                        <label for="idcard">Carte d'identité</label>
                        <input type="checkbox" name="datenaiss" id="datenaiss" checked="checked">
                        <label for="datenaiss">Date de naissance</label>
                        {% if session.logged_in %}
                        <button class="button" type="submit" name="btn_submit" value="creer">Créer</button>
                        {% else %}
                        <button class="button" type="submit" name="btn_submit" value="telecharger">Télécharger</button>
                        {% endif %}

                        <div class="progress" style="width: 50%; margin: 50px;">
		                    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
			                    <span class="progress-bar-label">0%</span>
		                    </div>
	                    </div>
                    </form>
		</section>

{% endblock %}

